# üì¶ SUMMARY  
# These commands change the ownership of the Nexus installation directory and its related data directory to the user and group "nexus".  
# Language/Platform: Bash/Linux shell commands  
# What you'll learn: How to change ownership of files and directories recursively to manage permissions properly  
# Outcome: The Nexus software files and its data directory are owned by the "nexus" user and group, allowing Nexus to run with appropriate permissions  
# Why this matters: Proper ownership ensures the Nexus service can read/write necessary files securely without using root privileges  

# ------------------------------  
# üß© SECTION TITLE: Create "nexus" user  
# ------------------------------  
adduser nexus                               # ‚úÖ What it does: Creates a new user named "nexus" with a default group and home directory  
                                           # üß† Why it matters: This user will own and run the Nexus service, reducing security risks of running as root  

# ------------------------------  
# üß© SECTION TITLE: Change ownership of Nexus directory  
# ------------------------------  
chown -R nexus:nexus nexus-3.79.0-09/       # ‚úÖ What it does: Recursively (-R) changes ownership of all files and folders in "nexus-3.79.0-09" to user "nexus" and group "nexus"  
                                           # üß† Why it matters: Ensures the Nexus app can access and modify its installation files when running as "nexus"  

# ------------------------------  
# üß© SECTION TITLE: Change ownership of Nexus data directory  
# ------------------------------  
chown -R nexus:nexus sonatype-work/         # ‚úÖ What it does: Recursively changes ownership of "sonatype-work" directory (where Nexus stores data) to user and group "nexus"  
                                           # üß† Why it matters: Prevents permission errors when Nexus tries to read/write repository data  

# ------------------------------  
# ‚ñ∂Ô∏è HOW TO RUN / EXECUTE THESE COMMANDS  
# ------------------------------  
# Bash/Linux shell:  
sudo adduser nexus                          # ‚úÖ What it does: Creates the "nexus" user with sudo privileges (if not already present)  
                                           # üß† Why it matters: Needed before assigning ownership so that "nexus" exists  

sudo chown -R nexus:nexus nexus-3.79.0-09/  # ‚úÖ What it does: Changes ownership of the Nexus installation directory recursively  
                                           # üß† Why it matters: Allows Nexus to control its own files without root  

sudo chown -R nexus:nexus sonatype-work/    # ‚úÖ What it does: Changes ownership of the data directory recursively  
                                           # üß† Why it matters: Gives Nexus full control of its working data  

# PowerShell (Windows equivalent):  
# Windows does not use chown; instead use icacls to set permissions:  
icacls "C:\nexus-3.79.0-09" /grant "nexus:(OI)(CI)F" /T  # ‚úÖ Grants full control (F) to "nexus" user recursively (/T)  
                                                       # üß† Why it matters: Provides Nexus necessary rights to manage files on Windows  

icacls "C:\sonatype-work" /grant "nexus:(OI)(CI)F" /T   # ‚úÖ Same for the data directory  
                                                       # üß† Why it matters: Ensures Nexus service can manage repository data properly  

# ------------------------------  
# ‚úÖ NOTES / GOTCHAS / TIPS  
# ------------------------------  
# - The `-R` flag in chown is critical; without it, only the top directory changes ownership.  
# - Be careful not to run chown recursively on system directories like `/` or `/etc`‚Äîit could break your OS.  
# - On Windows, remember `icacls` modifies permissions but doesn‚Äôt truly ‚Äúchange owner‚Äù like chown.  
# - Check your user was created: `id nexus` (Linux) or `net user nexus` (Windows).  
